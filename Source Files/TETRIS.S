; Generated by c68 v4.4.5, 25 Jan 95 (Jan 25 1995) from "tetris.c"
	text
	even
_main:
	link	a6,#-4
	;line	21
	jsr	_get_vb
	move.l	d0,-4(a6)
	;line	21
	move.l	-4(a6),-(a7)
	jsr	_main_game_loop
	;line	22
	moveq	#0,d0
L1:
	unlk	a6
	rts
_getCurTime:
	link	a6,#-12
	;line	36
	move.l	#1122,-4(a6)
	;line	36
	jsr	_enter_super
	;line	37
	move.l	-4(a6),a0
	move.l	(a0),-8(a6)
	;line	38
	jsr	_exit_super
	;line	39
	move.l	-8(a6),d0
L2:
	unlk	a6
	rts
_init_frame:
	link	a6,#0
	;line	50
	jsr	_disable_cursor
	;line	51
	move.l	8(a6),-(a7)
	jsr	_clear_screen
	unlk	a6
	rts
_doubleBuffer:
	link	a6,#0
	movem.l	d3/d4/d5,-(a7)
	move.w	20(a6),d3
	move.l	16(a6),d4
	move.l	12(a6),d5
	;line	64
	cmp.w	#1,d3
	bne	L3
	;line	66
	move.l	d5,-(a7)
	jsr	_clear_model_elements
	addq.l	#4,a7
	;line	67
	pea	8(a6)
	move.l	d5,-(a7)
	jsr	_render_model_elements
	addq.l	#8,a7
	;line	68
	moveq	#0,d3
	;line	70
	move.l	d5,-(a7)
	jsr	_set_vb
	bra	L4
L3:
	;line	74
	move.l	d4,-(a7)
	jsr	_clear_model_elements
	addq.l	#4,a7
	;line	75
	pea	8(a6)
	move.l	d4,-(a7)
	jsr	_render_model_elements
	addq.l	#8,a7
	;line	76
	moveq	#1,d3
	;line	78
	move.l	d4,-(a7)
	jsr	_set_vb
L4:
	;line	81
	move.w	d3,d0
L5:
	movem.l	-12(a6),d3/d4/d5
	unlk	a6
	rts
_run_menu:
	link	a6,#-4
	movem.l	d3/d4/d5,-(a7)
	move.l	8(a6),d4
	;line	94
	moveq	#1,d3
	;line	94
	move.l	d4,-(a7)
	jsr	_init_frame
	addq.l	#4,a7
	;line	95
	move.l	d4,-(a7)
	jsr	_fill_screen
	addq.l	#4,a7
	;line	96
	move.l	d4,-(a7)
	jsr	_plot_menu_display
	addq.l	#4,a7
	;line	99
	bra	L7
L6:
	;line	102
	move.w	d3,-(a7)
	move.l	d4,-(a7)
	jsr	_plot_menu_selection
	addq.l	#6,a7
L9:
L10:
	;line	104
	move.w	#11,-(a7)
	jsr	__trap_1_w
	addq.l	#2,a7
	tst.w	d0
	beq	L9
L11:
	;line	106
	jsr	_menuSelect
	move.w	d0,d5
	;line	108
	cmp.w	#1,d5
	bne	L12
	;line	110
	cmp.w	#1,d3
	bne	L13
	;line	112
	jsr	_playDropEffect
L13:
	;line	114
	cmp.w	#2,d3
	bne	L14
	;line	116
	moveq	#1,d3
L14:
	;line	118
	cmp.w	#3,d3
	bne	L15
	;line	120
	moveq	#2,d3
L15:
	bra	L16
L12:
	;line	123
	cmp.w	#2,d5
	bne	L17
	;line	125
	cmp.w	#1,d3
	bne	L18
	;line	127
	moveq	#2,d3
L18:
	;line	129
	cmp.w	#2,d3
	bne	L19
	;line	131
	moveq	#3,d3
L19:
	;line	133
	cmp.w	#3,d3
	bne	L20
	;line	135
	jsr	_playDropEffect
L20:
	bra	L21
L17:
	;line	138
	cmp.w	#3,d5
	bne	L22
	;line	140
	moveq	#1,d3
	beq	L23
	;line	142
	move.l	d4,-(a7)
	jsr	_main_game_loop
	addq.l	#4,a7
L23:
	;line	144
	cmp.w	#2,d3
	bne	L24
L24:
	;line	148
	cmp.w	#3,d3
	bne	L25
L25:
L22:
L21:
L16:
	;line	153
	move.w	d3,-(a7)
	move.l	d4,-(a7)
	jsr	_clear_menu_selection
	addq.l	#6,a7
L7:
	bra	L6
L8:
	movem.l	-16(a6),d3/d4/d5
	unlk	a6
	rts
_main_game_loop:
	link	a6,#-572
	movem.l	d3/d4/d5/d6/d7/a3/a4/a5,-(a7)
	lea	-414(a6),a0
	move.l	a0,d3
	move.l	8(a6),d4
	lea	_placeShape,a3
	lea	_clearShape,a4
	lea	-24(a6),a5
	;line	184
	move.l	#_buffer,d0
	add.l	#256,d0
	and.l	#-256,d0
	move.l	d0,d5
	move.w	#1,-6(a6)
	clr.w	-22(a6)
	clr.l	-566(a6)
	;line	184
	pea	7
	jsr	_getCurTime
	move.l	d0,-(a7)
	jsr	.Xlrem
	move.w	d0,-20(a6)
	;line	185
	move.l	d4,-(a7)
	jsr	_clear_screen
	addq.l	#4,a7
	;line	186
	move.l	d5,-(a7)
	jsr	_clear_screen
	addq.l	#4,a7
	;line	187
	move.l	d4,-(a7)
	jsr	_init_frame
	addq.l	#4,a7
	;line	188
	move.l	d5,-(a7)
	jsr	_init_frame
	addq.l	#4,a7
	;line	189
	pea	-554(a6)
	move.l	d3,-(a7)
	jsr	_init
	addq.l	#8,a7
	;line	190
	pea	-554(a6)
	move.l	d3,-(a7)
	move.w	-20(a6),-(a7)
	jsr	_makeBlock
	lea	10(a7),a7
	;line	192
	move.l	d3,-(a7)
	jsr	_gameLost
	addq.l	#4,a7
	move.w	d0,-570(a6)
	;line	194
	move.l	d3,-(a7)
	move.l	d4,-(a7)
	jsr	_render_frame
	addq.l	#8,a7
	;line	195
	move.l	d3,-(a7)
	move.l	d5,-(a7)
	jsr	_render_frame
	addq.l	#8,a7
	;line	197
	jsr	_getCurTime
	move.l	d0,d6
	;line	199
	move.l	d6,-(a7)
	jsr	_start_music
	addq.l	#4,a7
	;line	201
	bra	L27
L26:
	;line	203
	jsr	_getCurTime
	move.l	d0,d6
	;line	204
	move.l	d6,d0
	sub.l	-566(a6),d0
	move.l	d0,-562(a6)
	;line	206
	move.l	d3,-(a7)
	jsr	_detectKeyPress
	addq.l	#4,a7
	;line	207
	move.w	(a5),-568(a6)
	;line	209
	cmp.w	#1,-568(a6)
	bne	L29
	;line	211
	move.l	d3,-(a7)
	jsr	(a4)
	addq.l	#4,a7
	;line	212
	move.l	d3,-(a7)
	jsr	_canMoveShapeLeft
	addq.l	#4,a7
	move.w	d0,-16(a6)
	;line	213
	move.l	d3,-(a7)
	jsr	(a3)
	addq.l	#4,a7
	;line	214
	clr.w	(a5)
	;line	215
	cmp.w	#4,-16(a6)
	bne	L30
	;line	217
	move.l	d3,-(a7)
	jsr	_moveShapeLeft
	addq.l	#4,a7
L30:
L29:
	;line	221
	cmp.w	#2,-568(a6)
	bne	L31
	;line	223
	move.l	d3,-(a7)
	jsr	(a4)
	addq.l	#4,a7
	;line	224
	move.l	d3,-(a7)
	jsr	_canMoveShapeRight
	addq.l	#4,a7
	move.w	d0,-14(a6)
	;line	225
	clr.w	(a5)
	;line	226
	move.l	d3,-(a7)
	jsr	(a3)
	addq.l	#4,a7
	;line	227
	cmp.w	#4,-14(a6)
	bne	L32
	;line	229
	move.l	d3,-(a7)
	jsr	_moveShapeRight
	addq.l	#4,a7
L32:
L31:
	;line	232
	cmp.w	#3,-568(a6)
	bne	L33
	;line	234
	move.l	d3,-(a7)
	jsr	(a4)
	addq.l	#4,a7
	;line	235
	move.l	d3,-(a7)
	jsr	_canRotate
	addq.l	#4,a7
	move.w	d0,-18(a6)
	;line	236
	cmp.w	#4,-18(a6)
	bne	L34
	;line	238
	move.l	d3,-(a7)
	jsr	_rotateShape
	addq.l	#4,a7
L34:
	;line	240
	move.l	d3,-(a7)
	jsr	(a3)
	addq.l	#4,a7
	;line	241
	clr.w	(a5)
L33:
	;line	243
	cmp.w	#4,-568(a6)
	bne	L35
	;line	245
	move.l	d3,-(a7)
	jsr	(a4)
	addq.l	#4,a7
	;line	246
	move.l	d3,-(a7)
	jsr	_canLowerShape
	addq.l	#4,a7
	move.w	d0,-12(a6)
	;line	247
	cmp.w	#4,-12(a6)
	bne	L36
	;line	249
	move.l	d3,-(a7)
	jsr	_dropShape
	addq.l	#4,a7
L36:
	;line	251
	move.l	d3,-(a7)
	jsr	(a3)
	addq.l	#4,a7
	;line	252
	clr.w	(a5)
L35:
	;line	255
	tst.l	-562(a6)
	ble	L37
	;line	257
	move.l	d3,-(a7)
	jsr	(a4)
	addq.l	#4,a7
	;line	258
	move.l	d3,-(a7)
	jsr	_canLowerShape
	addq.l	#4,a7
	move.w	d0,-12(a6)
	;line	259
	cmp.w	#4,-12(a6)
	beq	L38
	;line	261
	jsr	_playDropEffect
	;line	262
	move.l	d3,-(a7)
	jsr	(a3)
	addq.l	#4,a7
	;line	263
	move.l	d3,-(a7)
	jsr	_clearRows
	addq.l	#4,a7
	move.w	d0,-572(a6)
	;line	264
	move.w	-572(a6),-(a7)
	move.l	d3,-(a7)
	jsr	_incr_score
	addq.l	#6,a7
	;line	265
	move.l	d3,-(a7)
	jsr	_gameLost
	addq.l	#4,a7
	move.w	d0,-570(a6)
	;line	266
	jsr	_rand
	ext.l	d0
	divs	#7,d0
	swap	d0
	move.w	d0,-20(a6)
	;line	267
	pea	-554(a6)
	move.l	d3,-(a7)
	move.w	-20(a6),-(a7)
	jsr	_makeBlock
	lea	10(a7),a7
L38:
	;line	269
	move.l	d3,-(a7)
	jsr	_dropShape
	addq.l	#4,a7
	;line	270
	move.l	d3,-(a7)
	jsr	_incr_time
	addq.l	#4,a7
	;line	271
	moveq	#70,d0
	add.l	d6,d0
	move.l	d0,-566(a6)
L37:
	;line	274
	cmp.w	#1,-6(a6)
	bne	L39
	;line	276
	move.l	d4,-(a7)
	jsr	_clear_model_elements
	addq.l	#4,a7
	;line	277
	move.l	d3,-(a7)
	move.l	d4,-(a7)
	jsr	_render_model_elements
	addq.l	#8,a7
	;line	278
	clr.w	-6(a6)
	;line	280
	move.l	d4,-(a7)
	jsr	_set_vb
	addq.l	#4,a7
	bra	L40
L39:
	;line	284
	move.l	d5,-(a7)
	jsr	_clear_model_elements
	addq.l	#4,a7
	;line	285
	move.l	d3,-(a7)
	move.l	d5,-(a7)
	jsr	_render_model_elements
	addq.l	#8,a7
	;line	286
	move.w	#1,-6(a6)
	;line	288
	move.l	d5,-(a7)
	jsr	_set_vb
	addq.l	#4,a7
L40:
	;line	291
	move.l	d6,-(a7)
	jsr	_update_music
	addq.l	#4,a7
	;line	292
	move.w	#37,-(a7)
	jsr	__trap_14_w
	addq.l	#2,a7
L27:
	tst.w	-570(a6)
	beq	L26
L28:
	;line	295
	move.l	d4,-(a7)
	jsr	_set_vb
	addq.l	#4,a7
	;line	296
	jsr	_stop_sound
	;line	297
	move.w	#17,-10(a6)
	bra	L42
L41:
	;line	299
	moveq	#0,d7
	bra	L46
L45:
	;line	301
	move.w	-10(a6),a0
	add.l	a0,a0
	move.w	d7,d0
	muls	#36,d0
	add.l	d3,d0
	add.l	d0,a0
	move.w	#1,24(a0)
L48:
	addq.w	#1,d7
L46:
	cmp.w	#10,d7
	blt	L45
L47:
	;line	303
	moveq	#0,d7
	;line	304
	move.l	d3,-(a7)
	move.l	d4,-(a7)
	jsr	_render_frame
	addq.l	#8,a7
L44:
	subq.w	#1,-10(a6)
L42:
	tst.w	-10(a6)
	bge	L41
L43:
	movem.l	-604(a6),d3/d4/d5/d6/d7/a3/a4/a5
	unlk	a6
	rts
	globl	_getCurTime
	globl	_init_frame
	globl	_doubleBuffer
	globl	_main_game_loop
	globl	_run_menu
	bss
_buffer:
	ds.b	32255
	globl	_buffer
	globl	_main
